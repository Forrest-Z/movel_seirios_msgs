<launch>
  <arg name="raw_depth_topic" default="/camera/depth/points"/>
  <arg name="filtered_depth_topic" default="/camera/depth/points/filtered"/>
  <arg name="nodelet_manager_name" default="pcl_filter_manager"/>

  <group ns="depth_camera_filter">
    <!-- load filter configs -->
    <rosparam file="$(find sensor_filters)/config/depth_camera_filter.yaml" command="load"/>

    <!-- main nodelet manager -->
    <node pkg="nodelet" type="nodelet" name="$(arg nodelet_manager_name)" args="manager" output="screen"/>

    <!-- "filter chain" with nodelets example: passthrough filter -->
    <!-- for an example launchfile with more than 1 filter refer to documentation in readme -->
    <node pkg="nodelet" type="nodelet" name="passthrough_filter" args="load pcl/PassThrough $(arg nodelet_manager_name)" output="screen">
      <!-- if first filter in pipeline, remap input topic to raw_depth_topic -->
      <remap from="~input" to="$(arg raw_depth_topic)"/>
      <!-- if last filter in pipeline, remap output topic to filtered_depth_topic -->
      <remap from="~output" to="$(arg filtered_depth_topic)"/>
    </node>
  </group>
</launch>