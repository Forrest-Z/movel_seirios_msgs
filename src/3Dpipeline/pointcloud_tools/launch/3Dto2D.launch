<?xml version="1.0" encoding="UTF-8" ?>
<launch>
	<arg name="pcd_path" default="/home/movel/.config/movel/maps/3Doffice16_2.pcd" />
	<arg name="number" default="1" />


	<arg name="mode" default="$(env MOVEL_MODE)" doc="mode: [deployment, development]"/>
	
	<group if="$(eval mode == 'deployment')">

		<node pkg="points_preprocessor_usi" type="groundplanfit" name="groundplanfit" output="screen">
			<rosparam file="$(find points_preprocessor_usi)/config/groundplanfit.yaml"/>
			<rosparam file="$(env HOME)/.config/movel/config/3dpipeline/pointcloud_tools/config/groundplanfit.yaml"/>
		</node>

	</group>

	<group unless="$(eval mode == 'deployment')">

		<node pkg="points_preprocessor_usi" type="groundplanfit" name="groundplanfit" output="screen">
			<rosparam file="$(find points_preprocessor_usi)/config/groundplanfit.yaml"/>
		</node>
		
	</group>

	<!-- PCD to PCL -->
	<node pkg="pcl_ros" type="pcd_to_pointcloud" name="pcd_to_pcl" output="screen" args="$(arg pcd_path) $(arg number)">
		<param name="frame_id" value="map"/>
	</node>
	
	<!-- Pointcloud grid -->
	<include file="$(find octomap_server)/launch/pointcloud_grid.launch"/>

</launch>
