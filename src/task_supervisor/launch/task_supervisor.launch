<?xml version="1.0"?>
<launch>

  <arg name="mode" default="$(env MOVEL_MODE)" doc="mode: [deployment, development]"/>

    <group if="$(eval mode == 'deployment')">
      <node pkg="task_supervisor" type="task_supervisor_node" name="task_supervisor" output="screen" respawn="true">
        <rosparam file="$(find task_supervisor)/config/task_supervisor.yaml"/>
        <rosparam file="$(env HOME)/.config/movel/config/task_supervisor/config/task_supervisor.yaml"/>

        <rosparam file="$(find planner_utils)/config/planner_utils.yaml" command="load" />
        <rosparam file="$(env HOME)/.config/movel/config/planner_utils/config/planner_utils.yaml" command="load" />

        <rosparam file="$(find movel)/config/costmap_common_params.yaml" ns="aux_clean_map"/>
        <rosparam file="$(find movel)/config/costmap_common_params.yaml" ns="aux_sync_map"/>
        <rosparam file="$(env HOME)/.config/movel/config/movel/config/costmap_common_params.yaml" ns="aux_clean_map"/>
        <rosparam file="$(env HOME)/.config/movel/config/movel/config/costmap_common_params.yaml" ns="aux_sync_map"/>      

      </node>
    </group>
    <group unless="$(eval mode == 'deployment')">
      <node pkg="task_supervisor" type="task_supervisor_node" name="task_supervisor" respawn="true" output="screen">
        <rosparam file="$(find task_supervisor)/config/task_supervisor.yaml"/>
      </node>
    </group>

  <node pkg="task_supervisor" type="launch_manager_node.py" name="launch_manager" output="screen" respawn="true">
    <rosparam command="load" file="$(find task_supervisor)/config/launch_manager.yaml"/>
  </node>

</launch>
