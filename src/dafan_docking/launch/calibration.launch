<?xml version="1.0" encoding="UTF-8" ?>

<launch>

  <include file="$(find sensor_launchpad)/launch/test.launch"/>
  <!-- <include file="$(find sensor_launchpad)/launch/dafan_sensors.launch"/> -->

  <arg name="april_node_namespace" default="apriltag_ros_continuous_node" />
  <rosparam command="load" file="$(find dafan_docking)/config/april_settings.yaml" ns="$(arg april_node_namespace)" />
  <rosparam command="load" file="$(find dafan_docking)/config/april_tags.yaml" ns="$(arg april_node_namespace)" />
  <node pkg="apriltag_ros" type="apriltag_ros_continuous_node" 
        name="$(arg april_node_namespace)" clear_params="true" output="screen" >
    <remap from="image_rect" to="/d435/color/image_raw" />
    <remap from="camera_info" to="/d435/color/camera_info" />
    <param name="camera_frame" type="str" value="d435_color_optical_frame" />
    <param name="publish_tag_detections_image" type="bool" value="true" />
  </node>

  <node pkg="rosbag" type="record" name="rosbag_record_april_tags" output="screen"
        args="-O $(find dafan_docking)/calib_scripts/data/calibration /tag_detections" />

</launch>
