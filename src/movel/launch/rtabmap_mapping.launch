<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="localization" default="false"/>
    <arg name="database_path" default="~/.config/movel/maps/rtabmap.db"/>
    
    <arg name="rgb_topic" default="/camera/color/image_raw"/>
    <arg name="depth_topic" default="/camera/aligned_depth_to_color/image_raw"/>
    <arg name="camera_info_topic" default="/camera/color/camera_info"/>
    <arg name="depth_camera_info_topic" default="/camera/depth/camera_info"/>
    
    <remap from="/rtabmap/grid_map" to="/map"/>
    <include file="$(find movel)/launch/rtabmap.launch">
        <arg unless="$(arg localization)" name="args" value="--delete_db_on_start"/>
        <arg name="localization" value="$(arg localization)"/>
        
        <arg name="rgb_topic" value="$(arg rgb_topic)"/>
        <arg name="depth_topic" value="$(arg depth_topic)"/>
        <arg name="camera_info_topic" value="$(arg camera_info_topic)"/>
        <arg name="depth_camera_info_topic" value="$(arg depth_camera_info_topic)"/>
        
        <arg name="rtabmapviz" value="false"/>
        <arg name="rviz" value="false"/>
        <arg name="database_path" value="$(arg database_path)"/>
        <arg name="output" value="log"/>
        <arg name="frame_id" value="base_link"/>
        <arg name="approx_sync" value="false"/>
        <arg name="publish_tf_odom" value="false"/>
    </include>
    
    <include file="$(find movel)/launch/robot_localization.launch" />
</launch>
