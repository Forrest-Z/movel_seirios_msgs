FROM registry.gitlab.com/movelai/seirios_ros/dev_plus_x86:latest AS staging
ARG CUSTOM_ROS_DEP_INSTALL
USER root
ENV USER=movel
ENV DEBIAN_FRONTEND=noninteractive \
    TERM=xterm-256color \
    MOVEL_MODE=deployment

RUN apt update \
    && mkdir -p /tmp/${USER}/debs \
    && chown -R ${USER}:${USER} /tmp/${USER}/debs

RUN echo $CUSTOM_ROS_DEP_INSTALL

RUN apt-get -y install $CUSTOM_ROS_DEP_INSTALL

RUN chown -R ${USER}:${USER} /home/${USER}/ && chmod 755 -R /home/${USER}

USER ${USER}
WORKDIR /home/${USER}/
